# Grenopoly

Grenopoly est un projet visant à créer une version en ligne du jeu MONOPOLY,
mettant en vedette les rues emblématiques de Grenoble. Les
joueurs pourront profiter de cette adaptation web pour jouer en
ligne ou localement sur leur ordinateur.

## Comment jouer ?

Rendez-vous sur le site Grenopoly en allant dans le menu Deploy -> Pages.
Une page d'accueil vous permet de choisir entre une partie locale (sur un seul
PC) ou une partie en ligne jouable de 2 à 6 joueurs.

### Partie locale

En cliquant sur le bouton partie locale, vous pouvez ajouter jusqu'à 6 joueurs
pour votre partie.
Pour les noms, ils peuvent contenir des lettres (au moins une) et des chiffres.

### En ligne

Pour créer une partie en ligne, cliquez sur le bouton _Créer une partie_. Sélectionnez
combien de joueurs participeront puis entrez votre pseudo et créez la partie.
Partagez ensuite le code de la partie avec vos amis qui pourront le renseigner en 
cliquant sur le bouton _Rejoindre une partie_.
Une fois le nombre de joeurs atteints, la partie se lance automatiquement.

# Règles du jeux

Les règles du jeux sont tirés du manuel du site [regledujeu] (https://www.regledujeu.fr/monopoly/).

## Résumé explicatif

* Ce jeu consiste à ACHETER, à LOUER ou à VENDRE diverses propriétés de façon si profitable que l’on puisse devenir __le plus riche des joueurs__ et éventuellement, le GAGNANT
* __« GO »__ est le point de départ, et les jetons avancent sur le plateau de jeu d’après les chiffre indiqué en lançant les dés.
* Si le jeton d’un joueur se place sur une case qui n’appartient encore à personne, le joueur pourra l’__acheter__ de la BANQUE, sinon, cette case sera vendue au plus offrant et dernier enchérisseur.
* Devenir __propriétaire__ a pour OBJECTIF la perception de loyers des adversaires logés sur la case qui représente la propriété. Ces loyers sont fortement augmentés par la construction de maisons et d’hôtels, il sera donc judicieux d’en ériger sur ses terrains.
* les cases « Caisse Commune » et « Chance » obligent le joueur à tirer une carte, dont les indications devront être observées.
* les joueurs vont quelquefois en __prison__ !
* Somme toute, c’est un jeu amusant, plein de surprises, et où l’on peut déployer son habileté.

## Déroulement de la partie

### Début de partie

* Le premier joueur est le celui dont le nom a été entré le premier à la création de la partie.
* Le joueur clique sur le bouton _Lancer les dés_ au milieu du plateaux.
* Le pion du joueur avance d'autant de cases que la somme des deux nombres indiqués par les dés.
* Une fois le pion arrêté, le joueur effectue l'action de la case
* Ceci fait, le joueur clique sur _Terminer son tour_ permettant au joueur suivant de jouer.
* Les JETONS restent sur les cases qu’ils occupent et repartent au tour suivant.
* Il peut y voir, en même temps, plus d’un jeton sur la même case.

### SELON LA CASE

* Atteinte par son jeton, un joueur peut avoir le droit d’acheter des terrains ou autres propriétés, – ou être forcé de payer un loyer (si la propriété appartient à un autre), de payer des taxes, de piocher une carte « Chance » ou « Caisse Commune, » d’aller en prison, etc.
* Si un joueur obtient un __doublet__, il avance son jeton, comme d’habitude, total représenté par les deux dés, et bénéficie de tous les privilèges ou doit subir toutes les pénalités relatifs à la case ainsi atteinte.
* Il __lance les dés de nouveau__, avance son jeton comme précédemment et la case ainsi atteinte le soumet derechef à tous ses effets.
* Si, cependant, il obtient un doublet trois fois de suite, il devra immédiatement __ALLER EN PRISON__. (Voir « PRISON. »)
* Les joueurs, durant la partie, feront plusieurs fois le tour du plateau de jeu.

### SALAIRE (CASE "GO")

* Chaque fois que le jeton s’arrête sur la __case « GO »__ ou la dépasse, en allant dans le sens de la Flèche, le joueur reçoit un « Salaire » de 200$, peu importe s’il l’atteint ou la dépasse en un coup de dés, ou en retirant une carte.
* Toutefois, le 200$ n’est payé qu’une seule fois par tour de plateau, qu’il atteigne la __case « GO »__ ou qu’il le dépasse. Un joueur ne peut recevoir un autre 200$ s’il atteint de nouveau la case « GO », en partant de cette case, il ne peut jamais recevoir 400$,
* sauf s’il passe sur la case « GO » et que son jeton s’arrête deux cases plus loin sur « Caisse Commune » , ou sept cases plus loin sur « Chance », et s’il retire la carte « Passez à Go » ;
* le joueur réclame 200$ pour être passé sur « GO » la première fois, puis un autre 200€ pour l’avoir atteint la seconde fois, selon les instructions de la carte.

### QUAND LE JETON TOMBE SUR UN BIEN SANS PROPRIÉTAIRE

* Quand le jeton d’un joueur __atteint une case dont le titre de propriété n’est détenu par aucun autre joueur :__
* Le joueur peut choisir d’__acheter cette propriété__, au prix indiqué sur la carte.
* Dans ce cas, il __paye le prix de la propriété__ et reçoit le Titre de Propriété attestant qu’il en est propriétaire, qu'il peut maitenant aperçevoir dans le panneau de droite.
* Si le joueur __refuse d’acheter__, la propriété est mise aux __enchères__ et est vendue au plus offrant, qui la paye en argent et dont il reçoit le Titre de Propriété qui fait preuve de son achat.
* Tous les joueurs peuvent __enchérir__, y compris celui qui a refusé d’acheter au prix initial, et les enchères peuvent commencer à n’importe quel prix.

### QUAND LE JETON TOMBE SUR UN BIEN QUI A DÉJÀ UN PROPRIÉTAIRE

* En ce cas, que ce soit après avoir lancé les dés ou par un avancement exigé par une carte tirée du paquet « Chance » ou du paquet « Caisse Commune » :
* le propriétaire perçoit du joueur un LOYER conforme à la liste imprimée sur le titre de propriété relatif au bien en question.
* Noter que, si le terrain comprend une ou plusieurs maisons, le loyer sera plus élevé que celui d’un __terrain sans constructions__.

### AVANTAGES DES PROPRIÉTAIRES

* Il est avantageux de détenir des titres de propriété sur la TOTALITÉ d’un groupe complet de même couleur (par exemple: chemin de la bastille, avenue Alsace-Lorraine ou rue des mathématiques)
* parce que le propriétaire peut alors percevoir un double loyer pour les terrains sans constructions qui font partie de cette propriété.
* L’avantage d’être propriétaire de MAISONS et d’HÔTELS plutôt que de terrains sans constructions consiste dans le droit de percevoir des loyers beaucoup plus élevés que ceux des terrains vagues.
* Le propriétaire y trouvera des bénéfices considérables.

### QUAND LE JETON ATTEINT LES CASES « CHANCE » ou « CAISSE COMMUNE »

* Le joueur pioche alors une carte du paquet indiqué et, après s’être conformé aux indications qui y sont imprimées, il remet la carte, dos en dessus, sous le paquet.
* Il gardera, cependant, jusqu’à ce qu’il s’en soit servi, la carte « __Sortez de prison, sans frais__ » et, lorsqu’elle aura été utilisée, il la remettra sous le paquet.
* Cette carte ne peut pas être vendue par un joueur à un autre joueur.
* QUAND LE JETON ATTEINT UNE CASE portant le mot __TAXE__, il faut payer.

### LA PRISON

* Un Joueur Est Emprisonné

  1.Si son jeton atteint la case « __ALLEZ EN PRISON__ »
  2.S’il tire un carte marquée « ALLEZ EN PRISON »
  3.S’il obtient trois doublets de suite.

* Note: Un joueur emprisonné ne peut percevoir le salaire de 200$ que lui rapporte ce coup de dé, parce qu’il doit avancer son jeton DIRECTEMENT vers la __case « Prison »__ et l’y placer, où que soit son jeton et quelle que soit la route suivie sur le plateau de jeu.
* Un joueur s’arrête de jouer quand il est envoyé en prison.
* __Visite a La Prison__. Si un joueur n’est pas « envoyé en prison » et ne fait qu’atteindre cette case au cours de la partie, il n’y est « qu’en visite ». Il n’encourt aucune pénalité et continue d’avancer, comme d’habitude, quand revient son tour.
* __Un Joueur Sort De Prison__

  1.en faisant un double à l’un ou l’autre des trois tours suivant son incarcération.
    --> en ce cas, il avance son jeton d’autant de cases qu’indique le chiffre total de son lancer de dés.
  2.en payant une amende de 50$ AVANT de lancer les dés à son tour suivant ou subséquent.
  3.un joueur NE DOIT PAS rester en prison après son troisième tour (c’est-à-dire qu’il ne doit pas y rester après qu’il aura laissé passer trois tours après y être entré.) Immédiatement __APRÈS__ avoir lancé les dés, à son troisième tour, il devra payer une amende de $50, à moins qu’il n’ait fait un double. Il sort alors de prison et avance immédiatement son jeton, à partir de la case « prison », d’autant de cases que l’indique le chiffre total qu’il a amené.
  Même en prison, un joueur peut acheter et ériger une maison, vendre ou acheter des propriétés, et percevoir des loyers.

### MAISONS

* Les MAISONS ne peuvent être achetées entre joueurs et ne peuvent être érigées que sur des terrains d’un GROUPE COMPLET DE MÊME COULEUR appartenant au joueur.
* Le prix à payer pour chaque maison est indiqué sur le titre de propriété du terrain.
* Il peut percevoir, d’un adversaire dont le jeton atteint les terrains sans constructions de son groupe complet de même couleur, un Double Loyer.
* Un joueur peut acheter et ériger, en tout temps, conformément aux règles ci-haut, autant de maisons que le lui permettent son jugement et ses
moyens, mais il doit construire UNIFORMÉMENT (autrement dit, on ne peut ériger plus d’une maison sur un terrain d’un groupe de même couleur avant d’en avoir construit une sur chaque terrain de ce groupe).
Il peut alors commencer une seconde rangée de maisons, et ainsi de suite, jusqu’à concurrence d’un maximum de quatre maisons par terrain.
* Mais, il ne pourra construire, par exemple, trois maisons, sur un terrain s’il n’en a qu’une seule sur un autre terrain du même groupe.
* Comme vous construisez uniformément, vous devez aussi vendre vos maisons uniformément à la banque.

### HÔTELS

* Avant d’acheter un hôtel, un joueur doit avoir quatre maisons sur chaque terrain d’un groupe complet de même couleur.
* Il peut alors acheter un hôtel, dans le but de l’ériger sur n’importe quel terrain de ce groupe de même couleur, en considération de quoi il remettra les quatre maisons de ce terrain, ainsi que le prix, en argent, indiqué sur le titre de propriété.
* Il est avantageux d’ériger des hôtels, à cause des loyers très élevés que l’on peut exiger.
* On ne peut ériger qu’un seul hôtel sur un même terrain.

### FAILLITE

* Un joueur est en faillite, quand il doit plus que ce qu'il peut payer.
* Un joueur en faillite doit se retirer immédiatement de la partie. Le joueur qui persiste jusqu’en dernier gagne la partie.

### DIVERS

* Aucun joueur ne doit prêter ou emprunter de l’argent d’un autre joueur.


https://www.regledujeu.fr/monopoly/#deroulement

https://docs.framasoft.org/fr/grav/markdown.html




## Diagramme UML

```plantuml
left to right direction
actor Anonyme as an
usecase "Rejoindre une partie réseau" as RPR
usecase "Créer une partie locale" as CPL
usecase "Authentification" as ATF
usecase "Consulter stats générales" as CSG


package Authentification {
  actor Authentifié as au
  usecase "Créer une partie réseau" as CPR
  usecase "Consulter stats personnelles" as CSP
}

package Jeu {
  actor Joueur as j
  usecase "Quitter la partie" as QLP
  usecase "Consulter son patrimoine" as CPA
  usecase "Jouer un tour" as JUT
}

j --> QLP
j --> CPA
j --> JUT
an --> RPR
an --> ATF
an --> CPL
an --> CSG
au --> CPR
au --> CSP
au --> RPR
au --> CPL
au --> CSG
QLP --> an #line:red;line.dashed
QLP --> Authentification #line:red;line.dashed
ATF --> Authentification #green;line.dashed
RPR --> Jeu #blue;line.dashed
CPR --> Jeu #blue;line.dashed
CPL --> Jeu #blue;line.dashed

```



__Actions dans un tour__
```plantuml
left to right direction
actor Joueur as j

package "Case propriété" {
  usecase "Acheter propriété" as APROP
  usecase "Mettre propriété aux enchères" as ENCH
  usecase "Payer loyer" as PLOY
}

package "Tirer une carte" {
  usecase "Tirer une carte chance" as TCHANC
  usecase "Tirer une carte communauté" as TCOMM
}

package "Cases diverses" {
  usecase "Payer les impots/taxe" as IMPO
  usecase "Rien faire (parc gratuit)" as PGRAT
  usecase "Aller en prison" as PRIS
}

usecase "Lancer les dés" as DE

j --> DE
DE --> APROP #line:red;line.dashed
DE --> ENCH #line:red;line.dashed
DE --> PLOY #line:red;line.dashed
DE --> TCHANC #line:blue;line.dashed
DE --> TCOMM #line:blue;line.dashed
DE --> IMPO #green;line.dashed
DE --> PGRAT #green;line.dashed
DE --> PRIS #green;line.dashed

```





__Jouer un tour__
```plantuml
left to right direction
actor Joueur as j

usecase "Lancer les dés" as DE
usecase "Fin de tour" as FDT
usecase "Prison" as PRIS 
usecase "Jouer son tour" as JOUT

j --> DE
DE --> JOUT
JOUT --> DE : Si un double
JOUT --> FDT
JOUT --> PRIS : Si 3ème double


```




__Créer et rejoindre une partie en ligne__
```plantuml
actor Créateur as C
actor Invité as I

usecase "Créer une partie" as CR
usecase "Sélectionner le nombre de joueurs" as SEL
usecase "Rentrer pseudo" as PS
usecase "Partager le code" as CO

usecase "Rejoindre une partie" as RE
usecase "Rentrer pseudo" as PSE
usecase "Rentrer le code de la partie" as RECO
usecase "Entrée dans la partie" as EN

usecase "Attente" as ATT

C --> CR
CR --> SEL
SEL --> PS
PS --> CO
CO --> I : Partage du code aux autres joueurs
CO --> ATT

I --> RE
RE --> PSE
PSE --> RECO
RECO --> ATT

ATT --> EN : Quand tous le nombre de joueurs requis est atteint


```

__Séquences Enchères__
```plantuml
actor user as u
participant system as s
actor all as a

==Initialisation==

u -> s: mettre aux enchères
activate s
s --> a: formulaire des enchères

==Renchérir==

s --> u: enchérir
u -> s: augmenter l'enchère
note over s: vérification du solde
s --> a: mise à jour de l'enchère
s -> s: passer au suivant

==Abandonner==

s --> u: enchérir
u -> s: se coucher
note over s: kick le joueur de l'enchère
s -> s: passer au suivant

==Fin enchère==
alt 0 joueur
s -> s: plus aucun joueur dans l'enchère
deactivate s
note over s
tous les joueurs se sont couchés 
sans miser une seule fois
end note

else 1 joueur
s -> s: plus qu'un joueur dans l'enchère
note over s: ajout de la propriété au gagnant
deactivate s
end
```
